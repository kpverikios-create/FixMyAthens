<!DOCTYPE html>
<html lang="el">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>FixMyAthens â€” Î¤ÎµÏ‡Î½Î¹ÎºÏŒÏ‚ Î¬Î¼ÎµÏƒÎ± ÏƒÏ„Î·Î½ Î‘Î¸Î®Î½Î±</title>

  <meta name="theme-color" content="#0f172a"/>
  <link rel="manifest" href="/manifest.json">

  <style>
    :root {
      --bg:#0f172a;
      --surface:#111827;
      --surface-soft:#1e2537;
      --stroke:rgba(255,255,255,0.07);
      --accent:#38bdf8;
      --text-primary:#f8fafc;
      --text-dim:#9ca3af;
      --radius-lg:20px;
      --radius-md:12px;
      --font:-apple-system,BlinkMacSystemFont,"Inter",Roboto,"Helvetica Neue",Arial,sans-serif;
    }

    *{box-sizing:border-box;margin:0;padding:0;}

    body{
      background:radial-gradient(circle at 20% 20%,rgba(56,189,248,.18) 0%,rgba(15,23,42,0) 60%),var(--bg);
      color:var(--text-primary);
      font-family:var(--font);
      -webkit-font-smoothing:antialiased;
      line-height:1.45;
    }

    .page{
      max-width:1200px;
      margin:0 auto;
      padding:24px clamp(16px,2vw,32px) 80px;
    }

    header.navbar{
      display:flex;
      align-items:flex-start;
      justify-content:space-between;
      flex-wrap:wrap;
      margin-bottom:32px;
    }

    .brand-wrap{
      display:flex;
      align-items:center;
      gap:12px;
    }

    .brand-icon{
      width:44px;
      height:44px;
      border-radius:12px;
      background:linear-gradient(150deg,#1f2937 0%,#0f172a 60%);
      border:1px solid rgba(255,255,255,0.12);
      display:flex;
      align-items:center;
      justify-content:center;
      font-size:0.7rem;
      font-weight:600;
      color:var(--accent);
      line-height:1.2;
      text-align:center;
    }

    .brand-text-head{
      font-size:1.05rem;
      font-weight:600;
      color:var(--text-primary);
      letter-spacing:-0.03em;
    }

    .brand-text-sub{
      font-size:0.8rem;
      color:var(--text-dim);
      line-height:1.3;
    }

    .admin-bar{
      display:flex;
      flex-wrap:wrap;
      gap:8px;
    }

    .pill{
      background:rgba(255,255,255,0.03);
      border:1px solid var(--stroke);
      color:var(--text-dim);
      border-radius:999px;
      font-size:0.7rem;
      padding:6px 10px;
      line-height:1.2;
      white-space:nowrap;
    }

    .admin-btn{
      background:transparent;
      border:1px solid var(--stroke);
      color:var(--text-primary);
      border-radius:var(--radius-md);
      font-size:0.75rem;
      font-weight:500;
      padding:8px 12px;
      cursor:pointer;
    }
    .admin-btn:active{scale:.97;}

    /* HERO */
    .hero{
      display:grid;
      grid-template-columns:1fr;
      gap:24px;
      margin-bottom:32px;
    }
    @media(min-width:900px){
      .hero{
        grid-template-columns:minmax(0,1fr) 400px;
      }
    }

    .hero-copy h1{
      font-size:clamp(1.4rem,1vw,1.6rem);
      font-weight:600;
      color:var(--text-primary);
      letter-spacing:-0.04em;
      line-height:1.2;
      margin-bottom:12px;
    }

    .hero-copy .subtitle{
      font-size:0.9rem;
      color:var(--text-dim);
      max-width:600px;
      line-height:1.5;
    }

    .hero-highlights{
      display:flex;
      flex-wrap:wrap;
      gap:12px;
      margin-top:20px;
    }

    .chip{
      background:rgba(56,189,248,0.08);
      color:var(--accent);
      border:1px solid rgba(56,189,248,0.4);
      border-radius:var(--radius-md);
      font-size:0.7rem;
      font-weight:500;
      padding:6px 10px;
      line-height:1.2;
      white-space:nowrap;
    }

    .chip.dim{
      background:rgba(255,255,255,0.03);
      color:var(--text-dim);
      border:1px solid var(--stroke);
    }

    /* APP CARD */
    .app-card{
      background:linear-gradient(145deg,#1f2535 0%,#111827 50%);
      border-radius:var(--radius-lg);
      border:1px solid rgba(255,255,255,0.08);
      box-shadow:0 40px 160px rgba(0,0,0,0.9);
      padding:20px 20px 16px;
      display:flex;
      flex-direction:column;
      gap:20px;
    }

    .section-head{
      display:flex;
      align-items:flex-start;
      justify-content:space-between;
      gap:12px;
    }
    .section-title{
      font-size:0.9rem;
      font-weight:600;
      color:var(--text-primary);
      letter-spacing:-0.03em;
      display:flex;
      flex-direction:column;
      line-height:1.3;
    }
    .section-desc{
      font-size:0.75rem;
      font-weight:400;
      color:var(--text-dim);
      line-height:1.4;
    }

    .btn-main{
      width:100%;
      background:var(--accent);
      color:#06121f;
      border:none;
      border-radius:var(--radius-md);
      font-weight:600;
      font-size:0.9rem;
      padding:12px 14px;
      cursor:pointer;
      text-align:center;
    }
    .btn-main:active{scale:.98;}

    .two-col{
      display:grid;
      grid-template-columns:1fr 1fr;
      gap:12px;
    }

    /* FORMS */
    .panel{
      background:rgba(15,23,42,0.6);
      border-radius:var(--radius-md);
      border:1px solid var(--stroke);
      padding:16px;
    }

    label{
      font-size:0.75rem;
      font-weight:500;
      color:var(--text-primary);
      margin-bottom:4px;
      display:block;
      letter-spacing:-0.03em;
    }

    select,
    input,
    textarea{
      width:100%;
      background:#0b1118;
      border:1px solid rgba(255,255,255,0.08);
      border-radius:var(--radius-md);
      color:var(--text-primary);
      font-size:0.85rem;
      line-height:1.4;
      padding:12px;
      font-family:var(--font);
      outline:none;
    }

    select:focus,
    input:focus,
    textarea:focus{
      border:1px solid var(--accent);
      box-shadow:0 0 0 4px rgba(56,189,248,0.18);
    }

    .form-row-inline{
      display:flex;
      gap:12px;
      flex-wrap:wrap;
    }

    .note{
      font-size:0.7rem;
      color:var(--text-dim);
      line-height:1.4;
    }

    .btn-row{
      display:flex;
      flex-wrap:wrap;
      gap:10px;
      margin-top:12px;
    }

    .btn-secondary{
      flex:1;
      background:transparent;
      border:1px solid var(--stroke);
      color:var(--text-primary);
      border-radius:var(--radius-md);
      font-weight:500;
      font-size:0.8rem;
      padding:12px;
      text-align:center;
      cursor:pointer;
    }
    .btn-secondary:active{scale:.98;}

    .btn-accent{
      flex:1;
      background:var(--accent);
      border:none;
      color:#06121f;
      border-radius:var(--radius-md);
      font-weight:600;
      font-size:0.8rem;
      padding:12px;
      text-align:center;
      cursor:pointer;
    }
    .btn-accent:active{scale:.98;}

    /* RESULTS LIST */
    .result-list{
      display:flex;
      flex-direction:column;
      gap:12px;
      margin-top:8px;
    }

    .result-item{
      background:rgba(255,255,255,0.02);
      border:1px solid var(--stroke);
      border-radius:var(--radius-md);
      padding:14px;
      display:flex;
      flex-direction:column;
      gap:12px;
    }
    @media(min-width:480px){
      .result-item{
        flex-direction:row;
        justify-content:space-between;
        align-items:flex-start;
      }
    }

    .result-left-title{
      font-size:0.9rem;
      font-weight:600;
      color:var(--text-primary);
      letter-spacing:-0.03em;
      margin-bottom:4px;
    }

    .result-left-sub{
      font-size:0.75rem;
      color:var(--text-dim);
      line-height:1.4;
    }

    .coverage{
      font-size:0.7rem;
      color:var(--text-dim);
      margin-top:6px;
      line-height:1.4;
    }

    .action-row{
      display:flex;
      gap:8px;
      flex-wrap:wrap;
    }

    .mini-btn{
      flex:1;
      background:#1e293b;
      border:1px solid var(--stroke);
      color:var(--text-primary);
      font-size:0.75rem;
      font-weight:600;
      line-height:1.2;
      border-radius:var(--radius-md);
      padding:10px 12px;
      cursor:pointer;
      text-align:center;
    }
    .mini-btn.call{
      background:#10b981;
      border:1px solid #10b981;
      color:#062017;
    }
    .mini-btn.wa{
      background:#25D366;
      border:1px solid #25D366;
      color:#062017;
    }
    .mini-btn:active{scale:.98;}

    .empty-state{
      font-size:0.8rem;
      color:var(--text-dim);
      background:rgba(255,255,255,0.02);
      border:1px solid var(--stroke);
      border-radius:var(--radius-md);
      padding:16px;
      line-height:1.5;
    }

    .success-box{
      background:rgba(16,185,129,0.08);
      border:1px solid rgba(16,185,129,0.4);
      color:#6ee7b7;
      border-radius:var(--radius-md);
      font-size:0.8rem;
      line-height:1.5;
      padding:16px;
    }

    footer.footer{
      margin-top:48px;
      color:var(--text-dim);
      font-size:0.7rem;
      line-height:1.5;
      text-align:center;
      border-top:1px solid rgba(255,255,255,0.05);
      padding-top:24px;
      max-width:700px;
    }
  </style>
</head>
<body>
  <div class="page">

    <!-- NAV / HEADER -->
    <header class="navbar">
      <div class="brand-wrap">
        <div class="brand-icon">
          ğŸ”§<br>FMA
        </div>
        <div>
          <div class="brand-text-head">FixMyAthens</div>
          <div class="brand-text-sub">Î¤ÎµÏ‡Î½Î¹ÎºÏŒÏ‚ Î¬Î¼ÎµÏƒÎ± ÏƒÎµ Î‘Î¸Î®Î½Î± & Ï€ÏÎ¿Î¬ÏƒÏ„Î¹Î±</div>
        </div>
      </div>

      <div id="adminBar" class="admin-bar" style="display:none;">
        <div class="pill">5â‚¬ / Î´Î¿Ï…Î»ÎµÎ¹Î¬ (pay-per-lead)</div>
        <button class="admin-btn" id="exportCsvBtn">Î›Î®ÏˆÎ· Leads (CSV)</button>
      </div>
    </header>

    <!-- HERO SECTION -->
    <section class="hero">
      <div class="hero-copy">
        <h1>Î§ÏÎµÎ¹Î¬Î¶ÎµÏƒÎ±Î¹ Î¬Î¼ÎµÏƒÎ± Ï„ÎµÏ‡Î½Î¹ÎºÏŒ; ğŸ‘‡</h1>
        <div class="subtitle">
          Î”Î¹Î¬Î»ÎµÎ¾Îµ ÎµÎ¹Î´Î¹ÎºÏŒÏ„Î·Ï„Î±, Î³ÏÎ¬ÏˆÎµ Ï„Î¿ Ï€ÏÏŒÎ²Î»Î·Î¼Î±, ÎºÎ±Î¹ Î¸Î± Î´ÎµÎ¹Ï‚
          Î´Î¹Î±Î¸Î­ÏƒÎ¹Î¼Î¿Ï…Ï‚ Î¼Î¬ÏƒÏ„Î¿ÏÎµÏ‚ Î³Î¹Î± Ï„Î·Î½ Ï€ÎµÏÎ¹Î¿Ï‡Î® ÏƒÎ¿Ï…. Î¤Î¿Ï…Ï‚ ÎºÎ±Î»ÎµÎ¯Ï‚ Î®
          Ï„Î¿Ï…Ï‚ ÏƒÏ„Î­Î»Î½ÎµÎ¹Ï‚ WhatsApp Î¼Î­ÏƒÎ± Î±Ï€ÏŒ Ï„Î·Î½ ÎµÏ†Î±ÏÎ¼Î¿Î³Î®.
        </div>

        <div class="hero-highlights">
          <div class="chip">ÎšÎ»Î®ÏƒÎ· ÎºÎ±Ï„ÎµÏ…Î¸ÎµÎ¯Î±Î½ ÏƒÏ„Î¿Î½ Î¼Î¬ÏƒÏ„Î¿ÏÎ±</div>
          <div class="chip">WhatsApp Î¼Îµ 1 Ï€Î¬Ï„Î·Î¼Î±</div>
          <div class="chip dim">Î‘Î¸Î®Î½Î± / ÎÏŒÏ„Î¹Î± / ÎšÎ­Î½Ï„ÏÎ¿</div>
        </div>
      </div>

      <div class="hero-side">
        <!-- APP CARD: STEP 1 -->
        <div id="homeCard" class="app-card">
          <div class="section-head">
            <div class="section-title">
              <span>1. Î¤Î¹ Î¼Î¬ÏƒÏ„Î¿ÏÎ± Ï‡ÏÎµÎ¹Î¬Î¶ÎµÏƒÎ±Î¹;</span>
              <span class="section-desc">Î•Ï€Î¯Î»ÎµÎ¾Îµ Ï…Ï€Î·ÏÎµÏƒÎ¯Î±</span>
            </div>
          </div>

          <div class="two-col" id="serviceGrid">
            <!-- Î³ÎµÎ¼Î¯Î¶ÎµÎ¹ Î´Ï…Î½Î±Î¼Î¹ÎºÎ¬ -->
          </div>

          <button class="btn-main" id="toFormBtn">Î£Ï…Î½Î­Ï‡ÎµÎ¹Î±</button>
        </div>

        <!-- APP CARD: STEP 2 (form) -->
        <div id="formCard" class="app-card" style="display:none;">
          <div class="section-head">
            <div class="section-title">
              <span>2. Î ÎµÏÎ¹Î­Î³ÏÎ±ÏˆÎµ Ï„Î¿ Ï€ÏÏŒÎ²Î»Î·Î¼Î±</span>
              <span class="section-desc">Î˜Î± ÏƒÎ¿Ï… Î´ÎµÎ¯Î¾Î¿Ï…Î¼Îµ Ï€Î¿Î¹Î¿Î¹ ÎµÎ¯Î½Î±Î¹ Î´Î¹Î±Î¸Î­ÏƒÎ¹Î¼Î¿Î¹</span>
            </div>
          </div>

          <div class="panel">
            <label>Î•Î¹Î´Î¹ÎºÏŒÏ„Î·Ï„Î±</label>
            <select id="serviceSelect"></select>

            <label>Î ÎµÏÎ¹Î¿Ï‡Î® / Î“ÎµÎ¹Ï„Î¿Î½Î¹Î¬</label>
            <input id="areaInput" placeholder="Ï€.Ï‡. Î Î±Î³ÎºÏÎ¬Ï„Î¹" />

            <label>Î¤Î¹ Î­Ï‡ÎµÎ¹ ÏƒÏ…Î¼Î²ÎµÎ¯;</label>
            <textarea id="descInput" rows="3" placeholder="Î .Ï‡. Ï„ÏÎ­Ï‡ÎµÎ¹ Î½ÎµÏÏŒ Î±Ï€ÏŒ Ï„Î¿Î½ Î½Î¹Ï€Ï„Î®ÏÎ±"></textarea>

            <div class="form-row-inline">
              <div style="flex:1;min-width:120px;">
                <label>Î ÏŒÏ„Îµ Ï„Î¿ Î¸Î­Î»ÎµÎ¹Ï‚;</label>
                <select id="urgencySelect">
                  <option>Î£Î®Î¼ÎµÏÎ± (Î­ÎºÏ„Î±ÎºÏ„Î¿)</option>
                  <option>Î‘ÏÏÎ¹Î¿</option>
                  <option>ÎŒÏ€Î¿Ï„Îµ Î¼Ï€Î¿ÏÎµÎ¯Ï„Îµ</option>
                </select>
              </div>
              <div style="flex:1;min-width:120px;">
                <label>Î¤Î·Î»Î­Ï†Ï‰Î½Î¿</label>
                <input id="phoneInput" placeholder="69..." />
              </div>
            </div>

            <div class="note" style="margin-top:4px;">
              ÎœÎµ Ï„Î·Î½ Î±Ï€Î¿ÏƒÏ„Î¿Î»Î®, ÏƒÏ…Î¼Ï†Ï‰Î½ÎµÎ¯Ï‚ Î½Î± ÏƒÏ„Î±Î»Î¿ÏÎ½ Ï„Î± ÏƒÏ„Î¿Î¹Ï‡ÎµÎ¯Î± ÏƒÎ¿Ï… ÏƒÏ„Î¿Î½ Ï„ÎµÏ‡Î½Î¹ÎºÏŒ Î³Î¹Î± Î½Î± ÎµÏ€Î¹ÎºÎ¿Î¹Î½Ï‰Î½Î®ÏƒÎµÎ¹ Î¼Î±Î¶Î¯ ÏƒÎ¿Ï….
            </div>

            <div class="btn-row">
              <button class="btn-accent" id="findBtn">Î’ÏÎµÏ‚ Ï„ÎµÏ‡Î½Î¹ÎºÏŒ Ï„ÏÏÎ±</button>
              <button class="btn-secondary" id="backHomeBtn">Î Î¯ÏƒÏ‰</button>
            </div>
          </div>
        </div>

        <!-- APP CARD: STEP 3 (results) -->
        <div id="resultsCard" class="app-card" style="display:none;">
          <div class="section-head">
            <div class="section-title">
              <span>3. Î”Î¹Î±Î¸Î­ÏƒÎ¹Î¼Î¿Î¹ Ï„ÎµÏ‡Î½Î¹ÎºÎ¿Î¯</span>
              <span class="section-desc">ÎšÎ¬Î»ÎµÏƒÎ­ Ï„Î¿Ï…Ï‚ Î® ÏƒÏ„ÎµÎ¯Î»Îµ WhatsApp</span>
            </div>
            <button class="btn-secondary" id="backToFormBtn" style="flex-shrink:0;font-size:0.7rem;padding:8px 10px;line-height:1.2;">
              Î Î¯ÏƒÏ‰
            </button>
          </div>

          <div id="mastersList" class="result-list"></div>

          <div id="noMasters" class="empty-state" style="display:none;">
            Î”ÎµÎ½ Î²ÏÎ­Î¸Î·ÎºÎ±Î½ Ï„ÎµÏ‡Î½Î¹ÎºÎ¿Î¯ Ï€Î¿Ï… Î½Î± ÎºÎ±Î»ÏÏ€Ï„Î¿Ï…Î½ Î±Ï…Ï„Î® Ï„Î·Î½ ÎµÎ¹Î´Î¹ÎºÏŒÏ„Î·Ï„Î± /
            Ï€ÎµÏÎ¹Î¿Ï‡Î® Î±Ï…Ï„Î® Ï„Î· ÏƒÏ„Î¹Î³Î¼Î®.
          </div>
        </div>

        <!-- APP CARD: STEP 4 (success) -->
        <div id="successCard" class="app-card" style="display:none;">
          <div class="section-head">
            <div class="section-title">
              <span>Î•ÏƒÏ„Î¬Î»Î· âœ”</span>
              <span class="section-desc">ÎŸ Ï„ÎµÏ‡Î½Î¹ÎºÏŒÏ‚ Î­Ï‡ÎµÎ¹ Ï„Î± ÏƒÏ„Î¿Î¹Ï‡ÎµÎ¯Î± ÏƒÎ¿Ï…</span>
            </div>
          </div>

          <div class="success-box">
            Î¤Î¿ Î±Î¯Ï„Î·Î¼Î¬ ÏƒÎ¿Ï… ÏƒÏ„Î¬Î»Î¸Î·ÎºÎµ ÏƒÏ„Î¿Î½ Ï„ÎµÏ‡Î½Î¹ÎºÏŒ. Î˜Î± ÏƒÎµ ÎºÎ±Î»Î­ÏƒÎµÎ¹ ÏƒÏÎ½Ï„Î¿Î¼Î±.
            Î‘Î½ Î¸Î­Î»ÎµÎ¹Ï‚ Ï€Î¹Î¿ Î¬Î¼ÎµÏƒÎ±, Ï€Î¬Ï„Î± â€œÎšÎ‘Î›Î•Î£Î•â€ ÏƒÏ„Î¿Î½ Ï„ÎµÏ‡Î½Î¹ÎºÏŒ Ï€Î¿Ï… ÎµÎ¯Î´ÎµÏ‚.
          </div>

          <button class="btn-main" id="homeFromSuccess" style="margin-top:12px;">
            Î•Ï€Î¹ÏƒÏ„ÏÎ¿Ï†Î® ÏƒÏ„Î·Î½ Î±ÏÏ‡Î¹ÎºÎ®
          </button>
        </div>
      </div>
    </section>

    <!-- FOOTER -->
    <footer class="footer">
      FixMyAthens Â© 2025 â€” Î‘Î¸Î®Î½Î±, Î•Î»Î»Î¬Î´Î±<br><br>
      ÎœÎµ Ï„Î· Ï‡ÏÎ®ÏƒÎ· Ï„Î·Ï‚ Ï…Ï€Î·ÏÎµÏƒÎ¯Î±Ï‚ ÏƒÏ…Î¼Ï†Ï‰Î½ÎµÎ¯Ï‚ ÏŒÏ„Î¹ Ï„Î± ÏƒÏ„Î¿Î¹Ï‡ÎµÎ¯Î± ÏƒÎ¿Ï… Î¼Ï€Î¿ÏÎ¿ÏÎ½
      Î½Î± Î´Î¹Î±Î²Î¹Î²Î±ÏƒÏ„Î¿ÏÎ½ ÏƒÎµ ÏƒÏ…Î½ÎµÏÎ³Î±Î¶ÏŒÎ¼ÎµÎ½Î¿ Ï„ÎµÏ‡Î½Î¹ÎºÏŒ Î³Î¹Î± ÏƒÎºÎ¿Ï€Î¿ÏÏ‚ ÎµÎ¾Ï…Ï€Î·ÏÎ­Ï„Î·ÏƒÎ·Ï‚.
      ÎŸÎ¹ Ï„ÎµÏ‡Î½Î¹ÎºÎ¿Î¯ Ï€Î»Î·ÏÏÎ½Î¿Ï…Î½ 5â‚¬ Î±Î½Î¬ lead (pay-per-lead).
    </footer>
  </div>

  <script>
  /* ==========================
     CONFIG
  ===========================*/

  // Î•Î¹Î´Î¹ÎºÏŒÏ„Î·Ï„ÎµÏ‚ Ï€Î¿Ï… Ï€ÏÎ¿ÏƒÏ†Î­ÏÎµÎ¹Ï‚
  const SERVICES = [
    { label:"Î¥Î´ÏÎ±Ï…Î»Î¹ÎºÏŒÏ‚",        icon:"ğŸš° Î¥Î´ÏÎ±Ï…Î»Î¹ÎºÏŒÏ‚" },
    { label:"Î—Î»ÎµÎºÏ„ÏÎ¿Î»ÏŒÎ³Î¿Ï‚",      icon:"ğŸ’¡ Î—Î»ÎµÎºÏ„ÏÎ¿Î»ÏŒÎ³Î¿Ï‚" },
    { label:"ÎšÎ»ÎµÎ¹Î´Î±ÏÎ¬Ï‚",         icon:"ğŸ”‘ ÎšÎ»ÎµÎ¹Î´Î±ÏÎ¬Ï‚" },
    { label:"Î¨Ï…ÎºÏ„Î¹ÎºÏŒÏ‚ (A/C)",    icon:"â„ï¸ Î¨Ï…ÎºÏ„Î¹ÎºÏŒÏ‚" },
    { label:"Î“ÎµÎ½Î¹ÎºÏŒÏ‚ Î¼Î¬ÏƒÏ„Î¿ÏÎ±Ï‚",  icon:"ğŸ› ï¸ Î“ÎµÎ½Î¹ÎºÏŒÏ‚" },
    { label:"Î†Î»Î»Î¿",              icon:"ğŸ”§ Î†Î»Î»Î¿" }
  ];

  // Î•Î´Ï Î¼Ï€Î±Î¯Î½Î¿Ï…Î½ Î¿Î¹ Î¼Î¬ÏƒÏ„Î¿ÏÎµÏ‚ (ÎµÏƒÏ Ï„Î¿Ï…Ï‚ ÏƒÏ…Î¼Ï€Î»Î·ÏÏÎ½ÎµÎ¹Ï‚)
  // Î Î±ÏÎ¬Î´ÎµÎ¹Î³Î¼Î± Î¼Î¿ÏÏ†Î®Ï‚:
  // {
  //   id: "m001",
  //   name: "ÎŒÎ½Î¿Î¼Î± ÎœÎ¬ÏƒÏ„Î¿ÏÎ±",
  //   type: "Î¥Î´ÏÎ±Ï…Î»Î¹ÎºÏŒÏ‚",
  //   areas: ["Î Î±Î³ÎºÏÎ¬Ï„Î¹","ÎÎ­Î± Î£Î¼ÏÏÎ½Î·"],
  //   phone: "6900000000",
  //   whatsapp: "6900000000",
  //   availability: "Î£Î®Î¼ÎµÏÎ±"
  // }
  const MASTORES = [
    // Î¬Ï†Î·ÏƒÎ­ Ï„Î¿ ÎºÎµÎ½ÏŒ Î±Î½ Î´ÎµÎ½ Î­Ï‡ÎµÎ¹Ï‚ Î±ÎºÏŒÎ¼Î± ÏƒÏ…Î½ÎµÏÎ³Î¬Ï„ÎµÏ‚
  ];

  /* ==========================
     DOM refs
  ===========================*/
  const adminBar        = document.getElementById('adminBar');
  const exportCsvBtn    = document.getElementById('exportCsvBtn');

  const homeCard        = document.getElementById('homeCard');
  const formCard        = document.getElementById('formCard');
  const resultsCard     = document.getElementById('resultsCard');
  const successCard     = document.getElementById('successCard');

  const serviceGrid     = document.getElementById('serviceGrid');
  const toFormBtn       = document.getElementById('toFormBtn');

  const serviceSelect   = document.getElementById('serviceSelect');
  const areaInput       = document.getElementById('areaInput');
  const descInput       = document.getElementById('descInput');
  const urgencySelect   = document.getElementById('urgencySelect');
  const phoneInput      = document.getElementById('phoneInput');

  const findBtn         = document.getElementById('findBtn');
  const backHomeBtn     = document.getElementById('backHomeBtn');
  const backToFormBtn   = document.getElementById('backToFormBtn');
  const homeFromSuccess = document.getElementById('homeFromSuccess');

  const mastersList     = document.getElementById('mastersList');
  const noMasters       = document.getElementById('noMasters');

  /* ==========================
     UI Flow helpers
  ===========================*/
  function showStep(step){
    // step: 'home' | 'form' | 'results' | 'success'
    homeCard.style.display    = (step==='home')    ? '' : 'none';
    formCard.style.display    = (step==='form')    ? '' : 'none';
    resultsCard.style.display = (step==='results') ? '' : 'none';
    successCard.style.display = (step==='success') ? '' : 'none';
  }

  /* ==========================
     INIT UI
  ===========================*/
  function initUI(){
    // Build service tiles in STEP 1
    SERVICES.forEach(s=>{
      const tile = document.createElement('div');
      tile.className = 'panel';
      tile.style.cursor = 'pointer';
      tile.innerHTML = `
        <div style="font-size:.8rem;font-weight:600;color:var(--text-primary);letter-spacing:-0.03em;">
          ${s.icon}
        </div>
        <div style="font-size:.7rem;color:var(--text-dim);line-height:1.4;margin-top:4px;">
          Î•Ï€Î¯Î»ÎµÎ¾Îµ ÎºÎ±Î¹ ÏƒÏ…Î½Î­Ï‡Î¹ÏƒÎµ
        </div>
      `;
      tile.onclick = ()=>{
        // Ï€ÏÎ¿ÎµÏ€Î¹Î»Î¿Î³Î® ÏƒÏ„Î¿ dropdown Ï„Î·Ï‚ Ï†ÏŒÏÎ¼Î±Ï‚
        serviceSelect.value = s.label;
        showStep('form');
      };
      serviceGrid.appendChild(tile);
    });

    // Fill serviceSelect dropdown
    SERVICES.forEach(s=>{
      const opt = document.createElement('option');
      opt.value = s.label;
      opt.textContent = s.label;
      serviceSelect.appendChild(opt);
    });

    // Button "Î£Ï…Î½Î­Ï‡ÎµÎ¹Î±" Î±Ï€ÏŒ Ï„Î¿ Ï€ÏÏÏ„Î¿ Î²Î®Î¼Î±
    toFormBtn.onclick = ()=> showStep('form');

    // Back buttons
    backHomeBtn.onclick = ()=> showStep('home');
    backToFormBtn.onclick = ()=> showStep('form');
    homeFromSuccess.onclick = ()=> showStep('home');

    // Find technicians
    findBtn.onclick = onFind;

    // Admin mode
    const params = new URLSearchParams(location.search);
    if(params.get('admin')==='1'){
      adminBar.style.display='flex';
    }

    exportCsvBtn.onclick = exportLeadsCsv;
  }

  /* ==========================
     Search + render results
  ===========================*/
  function onFind(e){
    e?.preventDefault?.();

    const service = serviceSelect.value.trim();
    const area    = areaInput.value.trim();
    const desc    = descInput.value.trim();
    const urg     = urgencySelect.value.trim();
    const phone   = phoneInput.value.trim();

    if(!service || !area || !desc || !phone){
      alert("Î£Ï…Î¼Ï€Î»Î®ÏÏ‰ÏƒÎµ ÏŒÎ»Î± Ï„Î± Ï€ÎµÎ´Î¯Î±.");
      return;
    }

    // Match logic
    const matches = MASTORES.filter(m=>{
      const typeOk =
        m.type === service ||
        (service==="Î†Î»Î»Î¿" && m.type==="Î“ÎµÎ½Î¹ÎºÏŒÏ‚ Î¼Î¬ÏƒÏ„Î¿ÏÎ±Ï‚");
      const areaOk = m.areas.some(
        a => a.trim().toLowerCase() === area.toLowerCase()
      );
      return typeOk && areaOk;
    });

    renderResults(matches, {
      service,
      area,
      desc,
      urgency: urg,
      phone
    });
  }

  function renderResults(list, reqData){
    mastersList.innerHTML = '';
    if(!list.length){
      noMasters.style.display='';
    } else {
      noMasters.style.display='none';
    }

    list.forEach(m=>{
      const item = document.createElement('div');
      item.className = 'result-item';

      const left = document.createElement('div');
      left.innerHTML = `
        <div class="result-left-title">${m.name}</div>
        <div class="result-left-sub">${m.type} Â· ${m.availability || "Î”Î¹Î±Î¸ÎµÏƒÎ¹Î¼ÏŒÏ„Î·Ï„Î±;"} </div>
        <div class="coverage">ÎšÎ±Î»ÏÏ€Ï„ÎµÎ¹: ${m.areas.join(', ')}</div>
      `;

      const right = document.createElement('div');
      right.className = 'action-row';

      const callBtn = document.createElement('button');
      callBtn.className = 'mini-btn call';
      callBtn.textContent = 'ÎšÎ‘Î›Î•Î£Î•';
      callBtn.onclick = ()=>{
        recordLead(m, reqData, 'call');
        window.location.href = `tel:${m.phone}`;
      };

      const waBtn = document.createElement('button');
      waBtn.className = 'mini-btn wa';
      waBtn.textContent = 'WHATSAPP';
      waBtn.onclick = ()=>{
        recordLead(m, reqData, 'whatsapp');
        const msg =
`Î“ÎµÎ¹Î± ÏƒÎ¿Ï…, ÏƒÎµ Î²ÏÎ®ÎºÎ± Î±Ï€ÏŒ Ï„Î¿ FixMyAthens.
ÎˆÏ‡Ï‰ Ï„Î¿ ÎµÎ¾Î®Ï‚ Î¸Î­Î¼Î±: ${reqData.desc}
Î ÎµÏÎ¹Î¿Ï‡Î®: ${reqData.area}
Î¤Î·Î»: ${reqData.phone}`;
        const encoded = encodeURIComponent(msg);
        window.open(
          `https://wa.me/30${m.whatsapp}?text=${encoded}`,
          '_blank'
        );
      };

      right.appendChild(callBtn);
      right.appendChild(waBtn);

      item.appendChild(left);
      item.appendChild(right);

      mastersList.appendChild(item);
    });

    showStep('results');
  }

  /* ==========================
     Lead capture (local)
  ===========================*/
  function getLeads(){
    try {
      const raw = localStorage.getItem('fixmyathens_leads');
      return raw ? JSON.parse(raw) : [];
    } catch(e){
      return [];
    }
  }

  function saveLeads(arr){
    localStorage.setItem('fixmyathens_leads', JSON.stringify(arr));
  }

  function recordLead(master, reqData, channel){
    const leads = getLeads();
    leads.push({
      id:Date.now().toString(),
      ts:new Date().toISOString(),
      masterId:master.id || null,
      masterName:master.name || null,
      masterPhone:master.phone || null,
      channel,
      service:reqData.service,
      area:reqData.area,
      desc:reqData.desc,
      urgency:reqData.urgency,
      clientPhone:reqData.phone
    });
    saveLeads(leads);

    showStep('success');
  }

  /* ==========================
     Export CSV (admin mode)
  ===========================*/
  function exportLeadsCsv(){
    const leads = getLeads();
    if(!leads.length){
      alert("Î”ÎµÎ½ Ï…Ï€Î¬ÏÏ‡Î¿Ï…Î½ leads Î±ÎºÏŒÎ¼Î±.");
      return;
    }

    const headers = [
      "id","ts","masterId","masterName","masterPhone",
      "channel","service","area","desc","urgency","clientPhone"
    ];

    const rows = leads.map(l =>
      headers.map(h=> JSON.stringify(l[h] ?? "") ).join(',')
    );

    const csv = [headers.join(',')].concat(rows).join('\r\n');
    const blob = new Blob([csv], {type:'text/csv;charset=utf-8;'});
    const url = URL.createObjectURL(blob);

    const a = document.createElement('a');
    a.href = url;
    a.download = `fixmyathens_leads_${new Date().toISOString().slice(0,19).replace(/[:T]/g,'-')}.csv`;
    document.body.appendChild(a);
    a.click();
    a.remove();
  }

  /* ==========================
     INIT + service worker
  ===========================*/
  initUI();
  showStep('home');

  if ('serviceWorker' in navigator) {
    navigator.serviceWorker.register('/service-worker.js')
      .catch(err => console.log('SW registration failed', err));
  }
  </script>
</body>
</html>
